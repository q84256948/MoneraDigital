# Monera Digital

## Overview
Monera Digital is a full-stack financial services application with a React frontend and Go backend API.

## Project Structure
- `/src` - React frontend (TypeScript, Vite, TailwindCSS)
- `/cmd/server` - Go backend server entry point
- `/internal` - Go backend internal packages (handlers, services, middleware, db, config, cache, models)
- `/api` - API route definitions (TypeScript)
- `/scripts` - Startup scripts for development and production
- `/docs` - Documentation
- `/openspec` - Bug reports and feature specifications
- `/dist` - Built frontend assets (generated by npm run build)

## Tech Stack
### Frontend
- React 18 with TypeScript
- Vite build tool
- TailwindCSS for styling
- Radix UI components
- React Router DOM
- React Query for data fetching
- i18next for internationalization

### Backend
- Go 1.24 with Gin framework
- PostgreSQL database
- JWT authentication with refresh tokens
- 2FA support (TOTP)
- Token blacklist for logout
- Rate limiting

## Development
- Frontend runs on port 5000 via Vite dev server
- Backend runs on port 8081 via Go server
- Vite proxies /api requests to the backend
- Both are started together via `bash scripts/start.sh`
- Database: PostgreSQL (use DATABASE_URL environment variable)

## Production Deployment
- Uses autoscale deployment
- Build: `npm run build && go build -o server ./cmd/server/main.go`
- Run: `PORT=5000 GIN_MODE=release ./server`
- Go server serves both API and static frontend files from dist/

## Scripts
- `npm run dev` - Start Vite development server
- `npm run build` - Build frontend for production
- `npm run test` - Run tests
- `go build -o server ./cmd/server/main.go` - Build Go backend
- `bash scripts/start.sh` - Start both backend and frontend (development)

## API Endpoints
- POST /api/auth/register - User registration
- POST /api/auth/login - User login
- GET /api/auth/me - Get current user
- POST /api/auth/2fa/setup - Setup 2FA
- POST /api/auth/2fa/enable - Enable 2FA
- POST /api/auth/2fa/verify-login - Verify 2FA during login
- POST /api/lending/apply - Apply for lending
- GET /api/lending/positions - Get user lending positions
- GET /api/addresses - Get withdrawal addresses
- POST /api/addresses - Add withdrawal address
- GET /api/withdrawals - Get withdrawals
- POST /api/withdrawals - Create withdrawal

## Recent Changes
- 2026-01-10: Fixed Go backend compilation errors (AuthService missing fields)
- 2026-01-10: Updated deployment from static to autoscale with full-stack support
- 2026-01-10: Go backend now serves static frontend files in production
- 2026-01-09: Configured for Replit environment (Go 1.24, Vite on port 5000)
